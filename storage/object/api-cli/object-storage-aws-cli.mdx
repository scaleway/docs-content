---
title: Using Object Storage with the AWS-CLI
description: This page explains how to use Scaleway Object Storage with AWS-CLI.
excerpt: |
  This page explains how to use Scaleway Object Storage with AWS-CLI.
totalTime: PT15M
steps:
  - step: TODO
    type: HowToStep
    url: https://www.scaleway.com/en/docs/storage/object/api-cli/object-storage-aws-cli
image: /assets/images/docs/scaleway.png
keywords: object storage, create, Howto
dates:
  validation: 2021-06-14
  posted: 2018-07-16
---

The AWS-CLI is an open-source tool built on top of the AWS SDK for Python (Boto) that provides commands for interacting with AWS services. With minimal configuration, you can start using all of the functionalities provided by the AWS Management.

<Message type="requirement">

  - You have an account and are logged into the [Scaleway Console](https://console.scaleway.com)  
  - You have [configured your API keys](/console/my-project/how-to/generate-api-key/)

</Message>

<Message type="note">

  This page uses AWS-CLI v1. If you want to follow the installation procedure for v2, see the [AWS-CLI documentation page](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html). 

</Message>

## How to install the AWS-CLI

The AWS-CLI is an open-source tool built on top of the AWS SDK for Python (Boto) that provides commands for interacting with AWS services. With minimal configuration, you can start using all of the functionality provided by the AWS Management.

To interact with AWS, `aws-cli` and `awscli-plugin-endpoint` need to be installed. The `awscli-plugin-endpoint` is a great plugin to help people more easily access third-party S3 providers.

1. Install `aws-cli` and `awscli-plugin` using `pip`.

  ```
  pip3 install awscli
  pip3 install awscli-plugin-endpoint
  ```

2. Create the file `~/.aws/config` by running the following command:
  ```
  aws configure set plugins.endpoint awscli_plugin_endpoint
  ```

3. Open the file in a text editor and edit it as follows:
  ```
  [plugins]
  endpoint = awscli_plugin_endpoint

  [default]
  region = nl-ams
  s3 =
    endpoint_url = https://s3.nl-ams.scw.cloud
    signature_version = s3v4
    max_concurrent_requests = 100
    max_queue_size = 1000
    multipart_threshold = 50MB
    # Edit the multipart_chunksize value according to the file sizes that you want to upload. The present configuration allows to upload files up to 10 GB (100 requests * 10MB). For example setting it to 5GB allows you to upload files up to 5TB.
    multipart_chunksize = 10MB
  s3api =
    endpoint_url = https://s3.nl-ams.scw.cloud
  ```
  <Message type="note">

  Set the `endpoint_url` and `region` corresponding to the geographical region of your bucket. It can either be `fr-par` (Paris, France), `nl-ams` (Amsterdam, The Netherlands) or `pl-waw`(Warsaw, Poland).

  </Message>
4. Generate a credentials file using the command:
  ```
  aws configure
  ```
5. Open the `~/.aws/credentials` file and configure your [API key](/console/my-project/how-to/generate-api-key/) as follows:
  ```
  [default]
  aws_access_key_id=<ACCESS_KEY>
  aws_secret_access_key=<SECRET_KEY>
  ```

6. Test your cluster.
  ```
  aws s3 ls
  ```

## How to generate an AWSv4 authentication signature

Requests sent to the Object storage API require an HTTP Authorization header.

<Message type="note">

Currently, the [AWS v4 Signature type](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html) is supported.

</Message>

Throughout the Object Storage documentation, v4 signatures are used.
When using a client library such as [aws-cli](https://aws.amazon.com/cli/), [s3cmd](https://s3tools.org/s3cmd) or [s3fs](https://github.com/s3fs-fuse/s3fs-fuse), signatures are automatically generated by the library for you.

To generate the signature, you need to have an Access Key and Secret Key generated in the [Credentials section](https://console.scaleway.com/project/credentials) of your management console.

A v4 signature consists of different parts:

AWS4-HMAC-SHA256
: Indicates AWS Signature Version 4 (AWS4) and the signing algorithm (HMAC-SHA256).

Credential
: Contains your access key and information about the request in the format: `${ACESS_KEY}/${YYYMMDD}/${REGION_SLUG}/s3/aws4_request`

SignedHeaders
: A lower-cased list of the names of the request headers used when computing the signature. (e.g. `host;x-amz-acl;x-amz-content-sha256;x-amz-date`)

Signature
: A signed hash consisting of a hash of the request body, your secret key, and information about the request (i.e. the canonical request). |

The canonical request included in the signature is made up of:

- The HTTP request method used.
- The path component of the request URI.
- The query string parameters included in the request.
- The list of request headers and their values, newline separated, lower-cased, and trimmed of whitespace.
- The list of header names without their values, sorted alphabetically, lower-cased, and semicolon-separated.
- The SHA256 hash of the request body.

This means the following example:

```
GET /?acl HTTP/1.1

Host: mybucket.s3.ams-nl.scw.cloud
x-amz-content-sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date: 20190411T101653Z
```

Would be based on the following canonical code:

```
GET
/
acl=
host:mybucket.s3.ams-nl.scw.cloud
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:20190411T101653Z

host;x-amz-content-sha256;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
```

**Example authorization header**

```
Authorization: AWS4-HMAC-SHA256
Credential=SCWN63TF9BMCPVNARV5A/20190411/nl-ams/s3/aws4_request,
SignedHeaders=host;x-amz-acl;x-amz-content-sha256;x-amz-date,
Signature=6cab03bef74a80a0441ab7fd33c829a2cdb46bba07e82da518cdb78ac238fda5
```

**Signing example (pseudo code)**

```
canonicalRequest = `
${HTTPMethod}\n
${canonicalURI}\n
${canonicalQueryString}\n
${canonicalHeaders}\n
${signedHeaders}\n
${hashedPayload}
`

stringToSign = "AWS4-HMAC-SHA256" + "\n" +
    date(format=ISO08601) + "\n" +
    date(format=YYYYMMDD) + "/" + ${REGION} + "/" + "s3/aws4_request" + "\n" +
    Hex(SHA256Hash(canonicalRequest))

dateKey = HMAC-SHA256("AWS4" + ${SECRET_KEY}, date(format=YYYYMMDD))
dateRegionKey = HMAC-SHA256(dateKey, ${REGION})
dateRegionServiceKey = HMAC-SHA256(dateRegionKey, "s3")
signingKey = HMAC-SHA256(dateRegionServiceKey, "aws4_request")

signature = Hex(HMAC-SHA256(signingKey, stringToSign))
```
<Navigation title="See Also">
  <NextButton to="/storage/object/api-cli/common-operations/">Understanding common operations</NextButton>
</Navigation>