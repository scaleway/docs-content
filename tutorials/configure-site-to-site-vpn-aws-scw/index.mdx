---
title: Establishing a Site-to-Site VPN between Scaleway and AWS
description: Learn how to configure a dynamic Site-to-Site VPN between Scaleway and AWS using Scaleway Managed VPN Gateway and BGP
products:
  - vpc
  - s2s-vpn
  - secret-manager
tags: vpn ipsec bgp aws hybrid-cloud
dates:
  validation: 2026-02-16
  posted: 2026-02-16
  validation_frequency: 12
difficulty: advanced
usecase:
  - hybrid-connectivity
ecosystem:
  - third-party
---

import Requirements from '@macros/iam/requirements.mdx'

import awsCustomerGatewayCreation from './assets/AWS-vpn-cgw-creation.webp'
import awsVirtualPrivateGatewayCreation from './assets/AWS-vpn-vgw-creation.webp'
import awsVPNConnection from './assets/AWS-vpn-connection.webp'
import awsVPNTunnelIP from './assets/AWS-vpn-tunnel-publicIP.webp'
import awsVPNConfiguration1 from './assets/AWS-vpn-configuration-1.webp'
import awsVPNConfiguration2 from './assets/AWS-vpn-configuration-2.webp'
import awsVPNReconfig1 from './assets/AWS-vpn-tunnel-reconfiguration.webp'
import awsVPNReconfig2 from './assets/AWS-vpn-tunnel-reconfiguration-psk.webp'
import awsVPNVerification from './assets/AWS-vpn-verification.webp'

import scwCustomerGatewayCreation from './assets/Scaleway-vpn-cgw-creation.webp'
import scwVirtualPrivateGatewayCreation from './assets/Scaleway-vpn-vgw-creation.webp'
import scwVPNRoute from './assets/Scaleway-vpn-route-creation.webp'
import scwVPNConnection1 from './assets/Scaleway-vpn-connection-1.webp'
import scwVPNConnection2 from './assets/Scaleway-vpn-connection-2.webp'
import scwVPNpsk1 from './assets/Scaleway-vpn-psk-1.webp'

This tutorial explains how to establish a dynamic Site-to-Site (S2S) VPN between Scaleway and AWS using the Scaleway Managed VPN Gateway.

The configuration uses:

- IPsec over IKEv2
- BGP for dynamic routing
- Route propagation between both environments

---

<Requirements />

- A Scaleway account with permissions to manage VPC and VPN resources
- An AWS account with permissions to manage VPC and VPN resources
- A VPC in both Scaleway and AWS
- Administrative access to configure both environments

---

## Architecture Overview

The connection is established between:

- A Scaleway Managed VPN Gateway
- An AWS Virtual Private Gateway
- A BGP session over an IPsec tunnel

Routes are dynamically exchanged between:

- Scaleway Private Network CIDR (example: `172.16.64.0/22`)
- AWS VPC CIDR (example: `172.31.0.0/16`)

---

## Step 1 – Create the Scaleway VPN Gateway

In Scaleway:

1. Create or select a VPC.
2. Attach a Private Network.
3. Deploy a Managed VPN Gateway attached to that Private Network.

You will need:

- The public IPv4 address of the Scaleway VPN Gateway (example: `163.172.175.212`)

<Lightbox image={scwVirtualPrivateGatewayCreation} alt="Creation of a Managed VPN Gateway on Scaleway" />

- Scaleway ASN: **12876**

This information is required when configuring AWS.

---

## Step 2 – Configure AWS

### Create the AWS Customer Gateway

Configure:

- Type: IPsec
- IP address: Public IP of the Scaleway VPN Gateway
- BGP ASN: `12876`

<Lightbox image={awsCustomerGatewayCreation} alt="Creation of AWS Customer Gateway referencing the Scaleway VPN Gateway" />

---

### Create the AWS Virtual Private Gateway

- Attach it to your AWS VPC.
- Configure an ASN (example: `65000`).

<Lightbox image={awsVirtualPrivateGatewayCreation} alt="Creation of AWS Virtual Private Gateway" />

<Message type="note">
The ASN configured here must match the ASN defined later in the Scaleway Customer Gateway.
</Message>

---

### Create the AWS VPN Connection

When creating the VPN connection:

- Use dynamic routing (BGP).
- Associate it with the Virtual Private Gateway.
- Select the previously created Customer Gateway.

<Lightbox image={awsVPNConnection} alt="Creation of VPN Connection on AWS" />

After creation, collect the following information:

- Tunnel public IP (example: `13.37.176.32`)
<Lightbox image={awsVPNTunnelIP} alt="AWS tunnel public IP displayed in the console" />

- Download the generic configuration file for reference
<Lightbox image={awsVPNConfiguration1} alt="Downloading the AWS VPN connection configuration file" />

- BGP peer private IP (example: `169.254.162.101`)
<Lightbox image={awsVPNConfiguration2} alt="AWS tunnel configuration details including BGP peer private IP" />

---

## Step 3 – Create the Scaleway Customer Gateway

In Scaleway, configure a Customer Gateway using:

- Public IP: AWS tunnel public IP
- ASN: The ASN defined on the AWS Virtual Private Gateway (for example `65000`)

<Lightbox image={scwCustomerGatewayCreation} alt="Creation of Customer Gateway on Scaleway referencing AWS" />

This defines AWS as the remote BGP peer.

---

## Step 4 – Configure BGP Routing Policy

Define the routing policy in Scaleway:

- `prefix_filter_in`: AWS VPC CIDR
- `prefix_filter_out`: Scaleway Private Network CIDR

<Lightbox image={scwVPNRoute} alt="Creation of VPN routing policy on Scaleway" />

This ensures that only the expected routes are exchanged.

---

## Step 5 – Configure the VPN Connection in Scaleway

When creating the VPN connection:

- Attach the Scaleway VPN Gateway.
- Attach the AWS Customer Gateway.
- Enable route propagation.
- Select the routing policy created in Step 4.

<Lightbox image={scwVPNConnection1} alt="Creation of VPN connection on Scaleway" />

Configure BGP using:

- A private IP within the AWS inside CIDR range.
- The AWS BGP peer private IP.

Both IP addresses must belong to the same `/30` subnet provided by AWS.

---

## Step 6 – Retrieve and Configure the Pre-Shared Key (PSK)

Scaleway automatically generates a PSK in Secret Manager when the VPN connection is created.

<Lightbox image={scwVPNpsk1} alt="Scaleway generating the PSK for the VPN connection" />

### 1. List the generated VPN secret

```bash
scw secret secret list region=fr-par -o json | jq .

```
Example output: 
```json
[
  {
    "id": "<SECRET_ID>",
    "project_id": "<PROJECT_ID>",
    "name": "connection_<VPN_CONNECTION_ID>",
    "status": "ready",
    "created_at": "<TIMESTAMP>",
    "updated_at": "<TIMESTAMP>",
    "tags": ["S2S VPN"],
    "description": "Generated by Scaleway",
    "protected": true,
    "type": "opaque",
    "path": "/s2s_vpn",
    "used_by": ["s2s_vpn"],
    "region": "fr-par"
  }
]
```

Copy the `id` value of the secret.

### 2. List the secret revisions

Retrieve the available secret versions:
```bash
scw secret version list <SECRET_ID> region=fr-par

```

Example of output:

```json
REVISION  SECRET ID     STATUS   CREATED AT     UPDATED AT     REGION
1         <SECRET_ID>   enabled  1 minutes ago  1 minutes ago  fr-par
```

Copy the latest REVISION value.

### 3. Access and decode the PSK

Retrieve the Base64-encoded secret value:

```bash
scw secret version access <SECRET_ID> revision=<REVISION> region=fr-par

```

Example of output:

```json
SecretID  <SECRET_ID>
Revision  <REVISION>
Data      <BASE64_PSK>
Type      opaque
```

Decode the Base64 value to obtain the PSK:

```bash
echo '<BASE64_PSK>' | base64 -d

```

Configure the decoded value in AWS Tunnel 1 under Pre-shared key

<Lightbox image={awsVPNReconfig2} alt="Updating the AWS tunnel pre-shared key with the value generated by Scaleway" /> 

<Message type="note">
Never expose real PSK values in public documentation. Always replace them with placeholders.
</Message>


---


## Step 7 – Align IPsec Parameters

Both sides must use identical IPsec settings:

| Parameter             | Value                |
|-----------------------|----------------------|
| IKE Version           | IKEv2                |
| Phase 1 Encryption    | AES-256              |
| Phase 1 Integrity     | SHA2-256             |
| Phase 1 DH Group      | 14 (MODP2048)        |
| Phase 2 Encryption    | AES-256              |
| Phase 2 Integrity     | SHA2-256             |
| Phase 2 DH Group      | 14                   |
| Startup Action (AWS)  | Start                |

Any mismatch prevents the tunnel from establishing.

<Lightbox image={awsVPNReconfig1} alt="AWS tunnel IPsec configuration parameters" />

---

## Step 8 – Verify the Connection

### On AWS

- Verify tunnel state is **UP**
- Confirm BGP session is **Established**
- Check CloudWatch logs if needed

<Lightbox image={awsVPNVerification} alt="AWS VPN connection status showing tunnel and BGP established" />

---

### On Scaleway

Verify:

- `TunnelStatus = up`
- `BgpStatusIPv4 = up`

<Lightbox image={scwVPNConnection2} alt="Scaleway VPN connection status showing tunnel and BGP up" />

Both IPsec and BGP must be operational for routing to function correctly.
---

## Result

You have successfully established a dynamic Site-to-Site VPN between Scaleway and AWS using:

- Managed VPN Gateway
- BGP route exchange
- Secure IPsec encryption
- Dynamic route propagation between VPCs
