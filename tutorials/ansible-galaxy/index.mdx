---
meta:
  title: Getting Started with Ansible Galaxy
  description: This tutorial shows how to configure and how to use Ansible Galaxy
content:
  h1: Getting Started with Ansible Galaxy
  paragraph: This tutorial shows how to configure and how to use Ansible Galaxy
tags: ansible getting-started ansible-galaxy ansible-collections ansible-galaxy-module
categories:
  - compute
  - kubernetes
dates:
  validation: 2022-02-07
  posted: 2018-08-02
---

Ansible Galaxy is a tool that seeks to give visibility to one of Ansible's most exciting features: reusable roles for server configuration or the installation of applications. Many users share roles on [Ansible Galaxy](https://galaxy.ansible.com/home).

Ansible roles consist of playbooks that group multiple tasks into one container. They allow the performance of automation tasks with clean directory structures.

<Message type="requirement">

- You have an account and are logged into the [Scaleway Console](https://console.scaleway.com)
- You have a [Scaleway Instance](/compute/instances/how-to/create-an-instance/) running Ubuntu Xenial
- You must be familiar with [Ansible](/tutorials/ansible-bionic-beaver/) and [Ansible-Apache](/tutorials/install-apache-ansible/).

</Message>

## Creating a LAMP server with Ansible roles

To create a Ansible roles, we need to use the `ansible-galaxy` command which has the templates to create it. Roles must be downloaded before they can be used in playbooks.

This will create it under the default directory `/etc/ansible/roles` and do the modifications else we need to create each directories and files manually.

1. Install Apache, MySQL and PHP with a ansible-galaxy command. We will use the role from `geerlinguy` who is a software developer involved in many open source development communities. Check [geerlinguy](https://galaxy.ansible.com/geerlingguy) for many other roles.

  ```
  ansible-galaxy install geerlingguy.apache geerlingguy.mysql geerlingguy.php
  ```

  The latest version will be downloaded if no version is specified. To specify a version, add the version after the role name, for instance `geerlingguy.apache,1.0.0` or `geerlingguy.mysql,1.0.0`

2. Create an Ansible playbook named `lamp.yml` with the following contents:

  ```
    ---
    - hosts: all
      roles:
      - geerlingguy.mysql
      - geerlingguy.apache
      - geerlingguy.php
  ```

3. Run the playbook against a host

  ```
  ansible-playbook lamp.yml
  ```

The LAMP server is now created.

## Creating a Solr server with Ansible roles

Apache Solr is a fast open-source Java search server. Solr enables you to easily create search engines which searches websites, databases and files. For more information on Solr, refer to the [Solr official documentation](http://lucene.apache.org/solr/news.html).

1. Install Java, tomcat6, Solr with a ansible-galaxy command. We will use the role from `geerlinguy` who is a software developer involved in many open source development communities. Check [geerlinguy](https://galaxy.ansible.com/geerlingguy) for many other roles.

  <Message type="note">

  java and tomcat6 roles are optional, since they'll be automatically picked up during installation of the `geerlingguy.solr` role

  </Message>

  ```
  ansible-galaxy install geerlingguy.java geerlingguy.tomcat6 geerlingguy.solr
  ```

2. Create a playbook named `solr.yml` with the following contents:

  ```
    ---
    - hosts: all
      roles:
        - geerlingguy.java
        - geerlingguy.tomcat6
        - geerlingguy.solr
  ```

3. Run the playbook against a host

  ```
  ansible-playbook solr.yml
  ```

The Solr server is now created. The roles' pages on the Ansible Galaxy website highlight the available variables for setting things like what version of Solr to install, where to install it, etc. (for example: [geerlingguy.solr](https://galaxy.ansible.com/geerlingguy/solr) Galaxy page).

## Helpful Galaxy commands

Some other helpful `ansible-galaxy` commands:

    - `ansible-galaxy list` displays a list of installed roles, with version numbers
    - `ansible-galaxy remove [role]` removes an installed role
    - `ansible-galaxy init` can be used to create a role template suitable for submission to Ansible Galaxy

Additionally, you can configure the default path where Ansible roles will be downloaded by editing your `ansible.cfg` configuration file (normally located in `/etc/ansible/ansible.cfg` and setting a roles_path in the [defaults] section.

For more information on Galaxy commands, refer to the [official documentation.](https://docs.ansible.com/ansible/2.4/ansible-galaxy.html#actions)
