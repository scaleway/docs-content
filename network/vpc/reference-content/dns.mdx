---
meta:
  title: Understanding internal DNS
  description: Learn more about how internal DNS works within the Scaleway ecosystem, and how to ensure your infrastructure is using DNS efficiently.
content:
  h1: Understanding internal DNS
  paragraph: Learn more about how internal DNS works within the Scaleway ecosystem, and how to ensure your infrastructure is using DNS efficiently.
tags: vpc private-network dns dns-server dns-resolution hostname
dates:
  validation: 2024-12-31
  posted: 2024-12-31
categories:
  - network
---

Scaleway VPC and Private Networks integrate managed DNS, for the effective resolution of hostnames to IP addresses. Read on to find out more.

## What is DNS?

The **D**omain **N**ame **S**ystem (DNS) is a naming system for devices connected to the internet or any network. Most prominently, DNS servers translate text-based domain names (e.g. www.scaleway.com) to numerical IP addresses (e.g. 51.158.66.220). This allows traffic to find its destination by resolving a human-readable text-based name, to the numerical IP addresses used by networks and servers.

## Scaleway DNS overview

Scaleway Private Networks benefit from managed internal DNS. This allows the resolution of resources' **hostnames** on the Private Network, into their private IP addresses. This managed DNS service is automatically exposed in each Private Network and no user-configuration is required.

<Message type="note">
When a Private Network is attached to a [legacy Public Gateway](/network/public-gateways/concepts/#ipam), the gatewayâ€™s DNS takes priority over that of the Private Network.
<Message>

## Hostname format

A resource's hostname is equivalent to the name you gave the resource when creating it. For example, if you have an Instance with the name `instance123` attached to a Private Network named `prodpn`, its address on that network is `instance123.prodpn.internal`.

<Message type="tip">
- If you update the resource's name after creating it, and thus its hostname changes, it will not be automatically updated on our DNS records unless you detach and reattach the resource to the Private Network. <br/><br/>
- If you created the resource via the API, and it has dots in its name, these dots should be replaced by dashes for the purposes of DNS resolution (`my.instance` --> `my-instance`). We generally recommend avoiding using dots in your resource names to avoid issues.<br/><br/>
- You can also reach a resource via its resource ID, e.g. `e49902a6-ed4c-431f-bd62-0fc41063eec0.prodpn.internal`

</Message>

## DNS resolution details

The managed DNS service is exposed on each Private Network through the following IP addresses:

- IPv4: `169.254.169.254`
- IPv6: `fe80::200:22ff:fe05:ca1e`

The DNS service parses packets' DNS messages, rewriting DNS queries from `<resource_name>.<private_network_name>` to `<resource_name>.<private_network_id>.<vpc_id>` to enable hostname resolution across Private Networks within a VPC. 

DNS is then fully resolved via an upstream DNS resolver cluster.

Note that DNS cannot resolve or forward queries between different VPCs. It can only resolve hostnames for resources within the same VPC, though they may be on different Private Networks within that VPC.

## Troubleshooting

If you experience problems with DNS, try the following steps:

1. **Detach and reattach the affected resources from/to the Private Network.** This is effective in solving many issues for older resources, or resources whose name you have changed.

2. **Check resource hostname**. Issues can arise if your resource has a dot in its name. Rename it if necessary to eliminate the dot, and detach/reattach it from the Private Network.

3. **Check Private Network name**. Issues can arise with Private Networks who share a name with a TLD. See our [dedicated document](/network/vpc/troubleshooting/pn-name/) for more help.

4. **Check whether you are using Network Manager**: DNS does not work out of hte box for Linux distributions using Network Managed, such as **RockyLinux**. Find out how to resolve this problem [in our troubleshooting page](/network/vpc/troubleshooting/private-dns-dhcp-not-working/#distributions-running-network-manager)

If you are still having problems reaching a resource attached to a Private Network via its hostname, [open a support ticket](https://console.scaleway.com/support).

## Anything else?

E.g.
- Any other tips for effective hostnaming
- Any options for manual configuration (configuring custom DNS names or domains within SCW internal DNS?)
- Anything re: InterLink?
- Any best practices to ensure efficient DNS resolution/avoid unnecessary requests?
- Any info as to which resources can access internal DNS/access to DNS query logging?