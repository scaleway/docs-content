---
meta:
  title: Confiugre balancing rules via API
  description: This page explains how configure balanching rules via the API
content:
  h1:  Confiugre balancing rules via API
  paragraph: This page explains how to configure balancing rules via the API
dates:
  validation: 2022-07-12
  posted: 2022-07-12
---

<Message type="requirement">

  - You have an account and are logged into the [Scaleway Console](https://console.scaleway.com/organization)
  - You have generated your [API key](/console/my-project/how-to/generate-api-key/)

</Message>


You can configure balancing rules via the [Scaleway API](https://developers.scaleway.com/en/).

In order to create a backend you need to customize the following parameters:

- `forward_port` — Load Balancer with forward user sessions to this port. For example, you can use port 8080 on a backend, while your front-end port is 80.
- `forward_port_algorithm` — string value, specifying of the following options:
  - `"roundrobin"` — new sessions are balanced equally between the backend servers;
  - `"leastconn"` — will take into account the number of active sessions, established to each of the servers, and will forward new ones to the server, which has the least.
  - `"first"` — the first server with available slots will be chosen
- `server_ip`- A list of IPv4 or IPv6 address of your servers to.

  ```json
  export $LB_ID="<ID of your Load Balancer>"
  export $TOKEN="<Your secret API key>"

  curl -s -X POST "https://api.scaleway.com/lb/v1/zones/$ZONE/lbs/$LB_ID/backends" -H "accept: application/json" -H "X-Auth-Token: $TOKEN" -H "Content-Type: application/json" \
  -d "{\"forward_port\":80,\"forward_port_algorithm\":\"roundrobin\",\"forward_protocol\":\"tcp\",\"health_check\":{\"check_delay\":2000,\"check_max_retries\":3,\"check_timeout\":1000,\"port\":80,\"tcp_config\":{}},\"name\":\"main backend\",\"send_proxy_v2\":false,\"server_ip\":[\"<REPLACE-BY-IP-OF-YOUR-SERVER1>\", \"<REPLACE-BY-IP-OF-YOUR-SERVER2>\"]}" | jq .
  ```

Save the ID of the reply.
```
export $BACKEND_ID="<ID of your backend>"
```

To delete the backend, run the followning command: 
```json
curl -H "X-Auth-Token: $TOKEN" -X DELETE "https://api.scaleway.com/lb/v1/zones/$ZONE/lbs/$LB_ID/backends/$BACKEND_ID"
```

More information is available in our [Load Balancer API documentation](https://developers.scaleway.com/en/products/lb/zoned_api/)