---
title: Establishing a Site-to-Site VPN between Scaleway and AWS
description: Learn how to configure a dynamic Site-to-Site VPN between Scaleway and AWS using Scaleway Managed VPN Gateway and BGP
products:
  - vpc
  - s2s-vpn
  - secret-manager
tags: vpn ipsec bgp aws hybrid-cloud
dates:
  validation: 2026-02-16
  posted: 2026-02-16
  validation_frequency: 12
difficulty: advanced
usecase:
  - hybrid-connectivity
ecosystem:
  - third-party
---

import Requirements from '@macros/iam/requirements.mdx'

import awsCustomerGatewayCreation from './assets/AWS-vpn-cgw-creation.webp'
import awsVirtualPrivateGatewayCreation from './assets/AWS-vpn-vgw-creation.webp'
import awsVPNConnection from './assets/AWS-vpn-connection.webp'
import awsVPNTunnelIP from './assets/AWS-vpn-tunnel-publicIP.webp'
import awsVPNConfiguration1 from './assets/AWS-vpn-configuration-1.webp'
import awsVPNConfiguration2 from './assets/AWS-vpn-configuration-2.webp'
import awsVPNReconfig1 from './assets/AWS-vpn-tunnel-reconfiguration.webp'
import awsVPNReconfig2 from './assets/AWS-vpn-tunnel-reconfiguration-psk.webp'
import awsVPNVerification from './assets/AWS-vpn-verification.webp'

import scwCustomerGatewayCreation from './assets/Scaleway-vpn-cgw-creation.webp'
import scwVirtualPrivateGatewayCreation from './assets/Scaleway-vpn-vgw-creation.webp'
import scwVPNRoute from './assets/Scaleway-vpn-route-creation.webp'
import scwVPNConnection1 from './assets/Scaleway-vpn-connection-1.webp'
import scwVPNConnection2 from './assets/Scaleway-vpn-connection-2.webp'
import scwVPNpsk1 from './assets/Scaleway-vpn-psk-1.webp'

This tutorial explains how to establish a dynamic Site-to-Site (S2S) VPN between Scaleway and AWS using the Scaleway Managed VPN Gateway.

The configuration uses:
- **IPsec over IKEv2**
- **BGP** for dynamic routing
- **Route propagation** between both environments

<Requirements />

- A Scaleway account with permissions to manage VPC and VPN resources
- An AWS account with permissions to manage VPC and VPN resources
- A VPC configured in both Scaleway and AWS
- Administrative access to configure both environments

## Architecture overview

The connection is established between:
- A Scaleway **Managed VPN Gateway**
- An AWS **Virtual Private Gateway**
- A **BGP session** over an IPsec tunnel

Routes are dynamically exchanged between:
- **Scaleway Private Network CIDR** (example: `172.16.64.0/22`)
- **AWS VPC CIDR** (example: `172.31.0.0/16`)

## Step 1 – Create the Scaleway VPN Gateway

1. Create or select a **VPC** in the Scaleway console.
2. Attach a **Private Network** to the VPC.
3. Deploy a **Managed VPN Gateway** attached to that Private Network.
4. Note the following information:
    - The **public IPv4 address** of the Scaleway VPN Gateway (e.g., `163.172.175.212`).
    - The **Scaleway ASN**: `12876`.

<Lightbox image={scwVirtualPrivateGatewayCreation} alt="Creation of a Managed VPN Gateway on Scaleway" />

## Step 2 – Configure AWS

### Create the AWS Customer Gateway

1. Create a **Customer Gateway** in the AWS console.
2. Configure the following parameters:
    - **Type**: IPsec
    - **IP address**: The public IP of your Scaleway VPN Gateway.
    - **BGP ASN**: `12876`.

<Lightbox image={awsCustomerGatewayCreation} alt="Creation of AWS Customer Gateway referencing the Scaleway VPN Gateway" />

### Create the AWS Virtual Private Gateway

1. Create a **Virtual Private Gateway** and attach it to your AWS VPC.
2. Configure an **ASN** (e.g., `65000`).

<Lightbox image={awsVirtualPrivateGatewayCreation} alt="Creation of AWS Virtual Private Gateway" />

<Message type="note">
The ASN configured here must match the ASN defined later in the Scaleway Customer Gateway configuration.
</Message>

### Create the AWS VPN connection

1. Create a new **VPN Connection** using the following settings:
    - **Routing Priority**: Dynamic (requires BGP).
    - **Virtual Private Gateway**: Select the gateway created above.
    - **Customer Gateway**: Select the gateway created in the previous step.

<Lightbox image={awsVPNConnection} alt="Creation of VPN Connection on AWS" />

2. After the connection is created, collect the following details:
    - **Tunnel public IP** (e.g., `13.37.176.32`).
    - **BGP peer private IP** (e.g., `169.254.162.101`).
    - Download the **Generic configuration file** for reference.

<Lightbox image={awsVPNConfiguration1} alt="Downloading the AWS VPN connection configuration file" />

## Step 3 – Create the Scaleway Customer Gateway

In the Scaleway console, create a **Customer Gateway** using:
- **Public IP**: The AWS tunnel public IP.
- **ASN**: The ASN defined on the AWS Virtual Private Gateway (e.g., `65000`).

<Lightbox image={scwCustomerGatewayCreation} alt="Creation of Customer Gateway on Scaleway referencing AWS" />
p
## Step 4 – Configure BGP routing p‡olicy

Define a routing policy in Scaleway to control traffic:
- **Prefix filter in**: Enter your AWS VPC CIDR.
- **Prefix filter out**: Enter your Scaleway Private Network CIDR.

<Lightbox image={scwVPNRoute} alt="Creation of VPN routing policy on Scaleway" />

This ensures that only authorized routes are exchanged.

## Step 5 – Configure the VPN connection in Scaleway

Create the **VPN Connection** in the Scaleway console:
1. Attach the **Scaleway VPN Gateway**.
2. Attach the **AWS Customer Gateway**.
3. Enable **Route propagation**.
4. Select the **Routing policy** created in Step 4.

<Lightbox image={scwVPNConnection1} alt="Creation of VPN connection on Scaleway" />

5. Configure **BGP** settings:
    - Provide a private IP within the AWS inside CIDR range.
    - Provide the AWS BGP peer private IP.

<Message type="important">
  Both IP addresses must belong to the same `/30` subnet provided by AWS in the configuration file.
</Message>

## Step 6 – Retrieve and Configure the Pre-Shared Key (PSK)

Scaleway automatically generates a PSK and stores it in **Secret Manager** when the VPN connection is created.

### 1. List the generated VPN secret
Use the Scaleway CLI to find your secret:
```bash
scw secret secret list region=fr-par -o json | jq .

```

### 2. Access and decode the PSK

Retrieve the Base64-encoded secret value using the `id` from the previous step:

```bash
scw secret version access <SECRET_ID> revision=latest region=fr-par

```

Decode the value to obtain your cleartext PSK:

```bash
echo '<BASE64_PSK>' | base64 -d

```

3. Navigate to your VPN Tunnel settings in the **AWS Console** and update the **Pre-shared key** with the decoded value.

<Lightbox image={awsVPNReconfig2} alt="Updating the AWS tunnel pre-shared key" />

## Step 7 – Align IPsec parameters

Both environments must use identical IPsec settings for the tunnel to establish.

| Parameter             | Value                |
|-----------------------|----------------------|
| IKE Version           | IKEv2                |
| Phase 1 Encryption    | AES-256              |
| Phase 1 Integrity     | SHA2-256             |
| Phase 1 DH Group      | 14 (MODP2048)        |
| Phase 2 Encryption    | AES-256              |
| Phase 2 Integrity     | SHA2-256             |
| Phase 2 DH Group      | 14                   |
| Startup Action (AWS)  | Start                |



## Step 8 – Verify the connection

### On AWS

Check the **Tunnel Details** tab. The state should show as **UP** and the BGP status as **Established**.

### On Scaleway

In the VPN connection dashboard, verify the following statuses:

* `TunnelStatus`: **up**
* `BgpStatusIPv4`: **up**

<Lightbox image={scwVPNConnection2} alt="Scaleway VPN connection status" />

## Result

You have successfully established a dynamic Site-to-Site VPN between Scaleway and AWS using:

- Managed VPN Gateway
- BGP route exchange
- Secure IPsec encryption
- Dynamic route propagation between VPCs

Your VPCs can now communicate securely using BGP for automated route management.
