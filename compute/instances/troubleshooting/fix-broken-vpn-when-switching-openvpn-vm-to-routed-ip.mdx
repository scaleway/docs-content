---
meta:
  title: Fix broken VPN when switching OpenVPN Instance to routed IP
  description: This page helps you recover VPN functionality when switching your OpenVPN Instance to routed IP
content:
  h1: Fix broken VPN when switching OpenVPN Instance to routed IP
  paragraph: This page helps you recover VPN functionality when switching your OpenVPN Instance to routed IP
tags: openvpn  instance routed ip
dates:
  validation: 2024-10-11
  posted: 2024-10-11
categories:
  - compute
---

When switching an Instance created with the OpenVPN InstantApp to routed IP, the configured VPN will fail to work after the reboot. This is caused by a bug in a script that has been fixed on newer versions of the OpenVPN image.

This can now be fixed by installing a new version of the OpenVPN scripts, which has been packaged in Scaleway's stable PPA and contains the fixed script.

You can also avoid this situation altogether by installing the package prior to moving to a routed IP.

## Your Instance has not been rebooted

1. Add Scaleway's stable PPA

```sh
add-apt-repository ppa:scaleway/stable
```
2. Add the ovpn-scripts package containing the new scripts

```sh
apt -y install ovpn-scripts
```

From this point on, your Instance may be safely rebooted and you will no longer lose VPN functionality.

## Your Instance has rebooted and the VPN service no longer works.

1. Add Scaleway's stable PPA

```sh
add-apt-repository ppa:scaleway/stable
```
2. Add the ovpn-scripts package containing the new scripts

```sh
apt -y install ovpn-scripts
```

3. Reboot your Instance.

Once rebooted, your VPN service will be available.

<Message type="important">
   OpenVPN images published after November 9th 2023 already contain the fixed script and do not need to be modified.
</Message>

