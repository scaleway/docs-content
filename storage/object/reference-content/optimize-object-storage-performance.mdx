---
meta:
  title: Optimize your Object Storage performance
  description: This page presents recommandations to optimize your Object Storage performance.
content:
  h1: Optimize your Object Storage performance
  paragraph: This page presents recommandations to optimize your Object Storage performance.
tags: object storage object-storage performance tuning better enhance throughput latency optimize
dates:
  validation: 2023-11-24
  posted: 2021-11-24
categories:
  - storage
  - object-storage
---

[Scaleway Object Storage](/storage/object/concepts/#object-storage) is a highly resilient and versatile service that guarantees the reliability and accessibility of your data, while being fully [S3-compatible](/storage/object/concepts/#s3) and user-friendly.

Even though it is designed to provide best-in-class latency and throughput, user infrastructure plays a predominant role in achieving optimum efficiency, as many different factors can have an impact on performance, such as your hardware, your software stack, or the way you manage your objects.

These guidelines aim at providing recommendations and methods to help you get the most out of your Object Storage.

TODO ADD USE CASES !!!!!!!

## Hardware recommendations

A powerful instance requires proper equipment and setup.

### Bandwidth

Try saturating 1-10 Gbps network connections before scaling to saturate higher bandwidths.

Adapt the throughput and latency of your bandwidth according to your most critical use cases:

- Favor throughput over latency for concurrent requests on large multipart requests to maximize efficiency. A smaller number of objects means less per-request connection setups and Secure Socket Layer (SSL) handshakes, which generate latency for each part, but have little-to-no impact on throughput thanks to parallelization.

- Favor latency over throughput for smaller-size objects (less than 1 MiB). Avoid per-request connection to remove TCP slow starts and SSL handshakes on each request. A lower latency will also reduce your Time To First Byte (TTFB) for larger objects. The tradeoff is that ListObject operations will take longer to complete as they will return a greater number of objects. 

<Message type="tip">
  [Prefixes](/storage/object/concepts/#prefix) and the `MaxKeys` parameter allow you to target smaller object batches.
</Message>

### Powerful CPU

A good order of magnitude is 16 cores for efficient concurrency. Try various operations with a single request at a time and measure your CPU usage. The operations that have the highest CPU usage are likely to throttle your machine and create bottlenecks. These operations can be used to determine the concurrency capacity of your object storage deployment.

For example, if the most CPU-intensive operation uses 20% of your CPU, you can execute up to five requests concurrently, to reach 100% of your processing capacity.

<Message type="tip">
  Several tools, such as [htop](https://htop.dev/) allow you to monitor your CPU activity in real time to evaluate the strain of your Object Storage workloads.
</Message>

## Geographic location

The physical distance to the hardware hosting your Object Storage can also have an impact on performance, especially on latency. Make sure to benchmark several regions to compare latency on your mission critical S3 operations.

To optimize latency and throughput on `GET` operations, Scaleway’s Edge Services allows for closer caching of your objects.

## Object recommendations


Minimum size of object to break into parts + size of parts (10 20 50 MB is good order of magnitude, 1000 parts max)
Breaking your objects into very small parts is counter productive, as many operations are executed on each part, thus increasing the latency and reducing the throughput.
minimum part size is 5MiB, and is automatically updated by some clients (minio, awscli) for larger objects (5000 MiB) to stay at 1000 parts
for objects > 50MiB, consider multipart upload


Multiparting

objects (20 ~ 50 MiB per part according to the size of the object) 

The way you manage your object operations also has an impact on performance. Large and small objects have different constraints, and adapting your processes to your “raw material” is quintessential for a seamless object storage deployment.
Multipart upload is an important parameter if you have an important concurrency capacity, because:

- you can parallelize parts upload for a better throughput.
smaller objects parts reduce the risk of failed upload due to a network issue, as it allows to retry the upload of the failed part and not the whole object.

- you can stop your upload and resume later, and upload parts over a desired period of time to reduce stress linked to upload on your infrastructure.

- you can upload object parts as you are creating it without knowing the size of the object or the number of parts.

- you can request different parts simultaneously using a single cURL request. `GetObject` requests allow you to know the number of parts of an object.

<Message type="tip">
Use the Range header in GET requests (for both multiparted and non-multiparted objects) to create concurrent requests for a better throughput.
</Message>

## Software recommendations

Try benchmarking several clients to upload objects, such as [MinIO CLI](/storage/object/api-cli/installing-minio-client/), [awscli](/storage/object/api-cli/object-storage-aws-cli/), [Rclone](/storage/object/api-cli/installing-rclone/), or [s5cmd](https://github.com/peak/s5cmdawscli).

Some clients may not be CLI tools, but rather SDKs, which can add slowness in managing Object Storage resources. do not hesitate in testing other tools.

Enable Scaleway Cockpit to access detailed and in-depth monitoring and logs to identify potential bottlenecks in your Object Storage deployment.

Enable edge services

Throughput is limited at the bucket level to guarantee the security and stability of Scaleway’s Object storage infrastructure. If you notice recurring rate limit errors (error 429) in your Cockpit logs, contact Scaleway’s support to unlock the threshold for your Organization.

Leverage the different storage classes offered by Scaleway, and benchmark

