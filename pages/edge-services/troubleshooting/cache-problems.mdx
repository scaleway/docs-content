---
title: I am experiencing problems with my Edge Services cache
description: Troubleshoot issues that may arise with caching on your Edge Services pipeline.
tags: edge-services cache cookies load-balancer
dates:
  validation: 2025-11-05
  posted: 2025-11-05
---

You may experience unexpected behavior with caching on your Edge Services pipeline. 

This page helps you resolve common problems.

<Message type="tip">
Before diving into this troubleshooting guide, ensure you are correctly using `curl` for your testing. `curl -I` uses the `HEAD` method by default, which does not always trigger the same logic as a real `GET` request. This can mislead you during cache tests, as cache checks might be skipped entirely, and responses may contain different headers. Use `curl -X GET -I` for better testing and more accurate `X-Cache` header information in responses.
</Message>

## Some assets are not being correctly cached by Edge Services.

You may find that even though your application includes proper cache headers (e.g., `Cache-Control: max-age=...`) and is configured behind a Load Balancer with an Edge Services pipeline where caching is activated, static assets like images are not being cached. This can result in repeated `X-Cache: miss` responses,  occasional `502` errors, and a weak cache hit:miss ratio, despite the assets being successfully served. 

### Cause

The issue often stems from unintended cache bypasses caused by cookies in client requests. For security reasons, Edge Services blocks caching for requests with cookies. This means the cache server bypasses the origin's Cache-control header when the client is using cookies for image requests, for example.

### Solutions

Use the [Edge Services API](https://www.scaleway.com/en/developers/api/edge-services/#path-cache-stages-create-cache-stage) to override the default behavior by setting `include_cookies` to `true` in your cache stage.

This tells Edge Services to cache responses even if cookies are present in the request.

You can verify cache behavior by using `curl -X GET -I` to test as follows:

```
curl -X GET -I "https://your-edge-service.com/asset.jpg"
```

Check the X-Cache header in the response:  

- `X-Cache: hit-fresh`: the cache is working.  
- `X-Cache: miss`: the cache was bypassed.

Use a cookie-free subdomain for static assets. This prevents cookies from being sent with requests for images, CSS, or JS.  

<Message type="important">
If your cookies contain authentication data, be cautious when enabling caching with cookies. Without proper `Cache-Control` headers, sensitive content may be cached and exposed to other users. Evaluate security risks before overriding the default behavior.
</Message>