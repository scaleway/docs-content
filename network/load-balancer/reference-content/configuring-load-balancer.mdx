---
meta:
  title: Configuring your Load Balancer
  description: Learn how to choose different settings and configurations for your Load Balancer depending on your needs
content:
  h1: Configuring your Load Balancer
  paragraph: Learn how to choose different settings and configurations for your Load Balancer depending on your needs
tags: load-balancer
categories: 
  - load-balancer
  - network
---

## Load Balancer Overview

Load Balancers allow you to distribute traffic and workload across multiple backend servers. They make it easy to scale your applications while ensuring continuous availability even in the event of heavy traffic. Each Load Balancer that you create is a highly available and fully managed Instance, consisting of one or more frontends and one or more backends. You can configure your Load Balancer according to your needs.

In this document, we explain some of the different configurations available when setting up your Load Balancer, and give examples of how to configure its frontends and backends for different use cases.

## Configuring a frontend

The frontend listens on the port you specify, and forwards received requests to the backend(s)

When creating a frontend, aside from the name the only configurable setting is that of the **port** it will listen on.

### Choosing a port

The most commonly-chosen ports for Load Balancer frontend's to listen on are:

* **Port 80 - HTTP**: Port 80 is commonly assigned to HTTP, and as such is the default network port used to send and receive unencrypted web traffic.
* **Port 443 - HTTPS**: Port 443 is commonly assigned to HTTPS, so is the standard port for secure (encrypted) HTTP traffic.

## Configuring a backend 

The configuration that you choose for your Load Balancer's backend determines the manner in which it transfers requests to its associated backend servers.

A number of configuration settings are available.

<Message type="note">

  The term "backend" is used simultaneously to refer to the set of configurations that determine how the Load Balancer forwards traffic, and the real destination "backend servers" which it forwards traffic on to. When creating a backend for your Load Balancer, you are prompted to set the configuration and give the IP addresses of the backend servers to forward traffic to.

</Message>

### Choosing a protocol and port 

The Load Balancer will initiate connections to backend servers using the protocol and port you define here. The most commonly-chosen port/protocol combinations are:

* **Port 80 + HTTP protocol**: Traffic will be forwarded using HTTP protocol, without encryption.
* **Port 443 + HTTPS protocol**: Traffic will be forwarded using HTTPS, i.e. with encryption.
* **Port 80/443 + TCP protcol**: ??

### Choosing a Verify Certificate setting

If you select the HTTPS protocol, you are prompted to choose a Verify Certificate setting. Note that this setting is not relevant / prompted for if you selected HTTP or HTTPS protocol.

When the Load Balancer initiates an HTTPS connection to a backend server, the backend server presents its certificate. 
- When Verify Certificate is selected, the Load Balancer checks the backend server's certificate and only connects if it is valid.
- When Verify Certificate is unselected, the Load Balancer does ot check the backend server's certificate, connecting to the backend server regardless of the certificate's validity. 

This setting mostly concerns those using self-signed certificates on the backend server/s.

Note that the same Verify Certificate setting you select here will also be used for health checks, if you choose HTTPS for your [health check method](#choosing-a-health-check-method).

### Choosing a proxy protocol

Proxy protocol determines how connection information from the client (eg the client’s IP address) will be transferred through the Load Balancer and on to the destination backend server. This allows the backend server to know the client's address, whatever the upper layer protocol (HTTP/HTTPS/TCP). 

* **No proxy protocol**:  Disable proxy protocol.
* **Proxy protocol v1**: Version one (text format).
* **Proxy protocol v2**: Version two (binary format).
* **Proxy protocol v2-ssl**: Version two with SSL connection
* **Proxy protocol v2-ssl-cn**:  Version two with SSL connection and common name information.

### Choosing a health check method

Load Balancers should only forward traffic to “healthy” backend servers. To monitor the health of a backend server, health checks regularly attempt to connect to backend servers using the defined protocol to ensure that servers are up and listening. Various protocols for health checks are available:

* **HTTP**: When selecting HTTP heath checks, you are prompted to choose a **method** (`GET`, `POST` or `PUT`), the **URI** to be targeted, and the response **code** that signals a successful health check.
* **HTTPS**: The same method and fields as for an HTTP health check apply, but data transmission is encrypted. You are also prompted to choose a **Verify Certificate** setting to be used during the health check. If you chose HTTPS as the main protocol for the Load Balancer's backend, the Verify Certificate setting is inherited. If you chose a different protocol, you are free to select the Verify Certificate setting of your choice for the healthcheck. See the [dedicated Verify Certificate section](#choosing-a-verify-certificate-setting) for more information.
* **MYSQL**: For MYSQL health checks, you are prompted to select the database username.
* **PGSQL**: For PGSQL health checks, you are prompted to select the database username.
* **LDAP**: No additional settings are required fr LDAP health checks.
* **Redis**: No additional settings are required for REDIS health checks.
* **TCP**: No additional settings are required for TCP health checks.

### Adding server IPs

You can add one or more IP addresses, in either IPv4 or IPv6, of the backend servers your Load Balancer's backend will forward traffic to.

### Using advanced settings

Here, you have the option to activate **sticky sessions**. When activated, this bind a user's session to a specific server in the pool of backend servers. This ensures that all subsequent sessions from the user are sent to the same backend server while there is at least one active session. Sticky sessions can be **cookie based** or **table based**.

- **Cookie-based** stickiness uses an HTTP cookie to identify a session, and the server in the backend pool that it will stick to. For each incoming request without a stickiness cookie, the Load Balancer creates a cookie and selects a backend for the session. Subsequent requests providing this cookie will land on the same backend. You can customize the name of the cookie.
- **Table-based** stickiness uses the source (client) IP address to stick sessions to backends.

By default, when activating sticky sessions through the console, the cookie-based method is used when HTTP protocol is selected, and the table-based method is used when TCP protocol is selected. Use the [API](https://developers.scaleway.com/en/products/lb/zoned_api/) if you want to select table-based stickiness with HTTP protocol.