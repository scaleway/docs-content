---
meta:
  title: How to configure a Dedibox failover IP on Debian and Ubuntu
  description: This page explains how to configure a Dedibox failover IP on Debian or Ubuntu Linux.
content:
  h1: How to configure a Dedibox failover IP on Debian and Ubuntu
  paragraph: This page explains how to configure a Dedibox failover IP on Debian or Ubuntu Linux.
tags: failover-failover IP ip debian ubuntu dedibox linux
dates:
  validation: 2025-01-30
  posted: 2021-07-29
categories:
  - dedibox-network
---

This page shows you how to configure a [failover IP](/dedibox-ip-failover/concepts/#failover-ips) on Dedibox servers running on Debian or Ubuntu Linux.

<Macro id="requirements" />

- A Dedibox account logged into the [console](https://console.online.net)
- [Created](/dedibox/how-to/order-a-server/) a Dedibox dedicated server

## Failover IP configuration on Debian

<Message type="note">
  If you are using Ubuntu 18.04 or later, you should configure the interfaces using [Netplan](/dedibox-network/how-to/configure-network-netplan/).
</Message>

1. Connect to your server using SSH.
2. Open the network configuration file `/etc/network/interfaces` in a text editor, for example `nano`:
    ```
    nano /etc/network/interfaces
    ```
3. Add the failover IP to the configuration as shown in the following example:
    ```
    # This file describes the network interfaces available on your system
    # and how to activate them. For more information, see interfaces(5).
    # The loopback network interface
    auto lo
    iface lo inet loopback
    # The primary network interface
    auto eth0
    iface eth0 inet static
         address 195.154.123.123
         netmask 255.255.255.0
         gateway 195.154.123.1
    auto eth0:0
    iface eth0:0 inet static
    address ip_failover
    netmask 255.255.255.255
    ```
    <Message type="note">
      The interface name `eth0` may vary, depending on your OS version and system configuration. Use the `ifconfig` command to determine the name of your primary network interface.
    </Message>
4. Save the file and exit the editor.
5. Bring up the interface using the following command:
    ```
    ifup eth0:0
    ```

## Failover IP configuration on Ubuntu (Netplan)

Since Ubuntu 18.04, Netplan has been the default network configuration system.

### Steps for configuring Netplan with failover IP

1. Disable cloud-init network configuration:
   ```bash
   sudo mkdir -p /etc/cloud/cloud.cfg.d
   echo 'network: {config: disabled}' | sudo tee /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg
   ```
2. Backup and modify the existing Netplan configuration:
   ```bash
   sudo cp /etc/netplan/50-cloud-init.yaml /etc/netplan/01-myplan.yaml
   sudo mv /etc/netplan/50-cloud-init.yaml /etc/netplan/50-cloud-init.yaml-backup
   ```
3. Update the Netplan configuration.
   Edit `/etc/netplan/01-myplan.yaml` using `nano`:
   ```yaml
   network:
     renderer: networkd
     ethernets:
       enp5s0:
         critical: true
         dhcp-identifier: mac
         dhcp4: false
         dhcp6: false
         addresses:
           - 51.111.222.333/24  # Server main IP (/24)
           - 212.111.222.333/32  # Alternate IPs / IP redirects (/32)
           - 212.111.222.334/32
           - 212.111.222.335/32
         routes:
           - to: 0.0.0.0/0
             via: 62.210.0.1
             metric: 1
             on-link: true
         nameservers:
           addresses:
             - 51.159.69.156
             - 51.159.69.162
       enp6s0:
         dhcp4: true
         dhcp4-overrides:
           use-routes: false
         routes:
           - to: 10.88.0.0/13  # Use appropriate IP/gateway from DHCP
             via: 10.89.23.129
   version: 2
   ```
4. Run the following command to test the configuration:
   ```bash
   sudo netplan try
   ```
   If everything works as expected, apply the configuration:
   ```bash
   sudo netplan apply
   ```
   <Message type="warning">
     If there is an error in your configuration, it might render your network inaccessible. You may need to revert changes using KVM/IPMI access.
   </Message>

### Additional notes

- Ensure that indentation and formatting are correct to avoid YAML syntax errors.
- If networking issues persist, check logs using:
  ```bash
  sudo journalctl -u systemd-networkd --no-pager
  ```
- More Netplan examples can be found in the [official Canonical repository](https://github.com/canonical/netplan/tree/main/examples).
