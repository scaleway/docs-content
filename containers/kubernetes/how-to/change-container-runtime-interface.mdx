---
meta:
  title: How to change the Container Runtime Interface (CRI) of an existing cluster
  description: This page explains how to change the Container Runtime Interface (CRI) of an existing cluster
content:
  h1: How to change the Containter Runtime Interface (CRI) of an existing cluster
  paragraph: This page explains how to change the Container Runtime Interface (CRI) of an existing cluster
tags: cluster cni docker crio cri-o
dates:
  validation: 2023-01-31
  posted: 2023-01-31
categories:
  - containers
---

A container runtime is, as one of the lowest layers of Kubernetes, the software that (in addition to other tasks) ensures that containers are started and stopped accordingly. Historically, Kubernetes used Docker as the container runtime.  
However, with ongoing development, it became clear that it was not entirely suitable. With the rapidly evolving world of container runtimes, it became clear that other solutions might be better suited.  
To open up Kubernetes to other container runtimes, the Container Runtime Interface (CRI) was developed. This is a plugin in a Kubernetes cluster that allows the `kubelet` to use more than one type of container runtime. CRI consists of a protocol buffer and a gRPC API, as well as libraries, with additional specifications and tools.  
At Scaleway, we focus on Containerd, the industry-leading CRI solution. [Containerd](https://containerd.io/) was developed initially by Docker and donated to the Cloud Native Computing Foundation (CNCF). It uses a subset of the original Docker engine and comes with most of Docker's functionality for running containers and managing storage and images - but lacks many developer-oriented features. It is, therefore, suitable for large-scale use as part of a container orchestrator, such as Kubernetes. 

<Message type="important">
  With Kubernetes version 1.25, Scaleway **Kubernetes Kosmos** will deprecate all Kubernetes interfaces named `docker` and `cri-o`.
</Message>

If you are still using one of the deprecated CRIs, your cluster will have the following limitations:
* Pools using deprecated CRIs cannot scale up.
* Control planes cannot be upgraded if the CRI used by a pool is deprecated.

To migrate your node pools to a supported CRI, you have to create a new resource pool supporting `containerd`, move your pods to the new pool and then delete your old pool.
<Macro id="iam-requirements" />

<Message type="requirement">
  - You have an account and are logged into the [Scaleway console](https://console.scaleway.com) 
  - You have [created](/containers/kubernetes/how-to/create-cluster) a Kubernetes Kapsule cluster
</Message>

## How to move your pods to a new pool

1. Click **Kubernetes** in the **Containers** section of the [Scaleway Console](https://console.scaleway.com) side menu. The Kubernetes Kapsule dashboard displays.
2. Click <Icon name="more" /> next to the cluster you want to edit and click **More info** to detailed information about the cluster.
3. Click the **Pools** tab to view the node pools associated to your cluster. 
    <Message type="tip">
      Any node pool using `docker` or `cri-o` runtimes is deprecated.
    </Message>
4. Click **+ Add a new pool**. The pool creation wizard displays.
5. Configure your new pool:
    * Select a zone for your pool (the zone of your pool must correspond to the same zone as the one your cluster is deployed in.).
    * Select the node type to be used for your pool.
    * Configure pool options, such as **autoscaling** and **autohealing**.
    * Click **Add pool** to create the new pool and to add it to your cluster.
6. Use the `kubectl get nodes` command to retrieve a list of your nodes.
7. Mark the nodes of your old pool as unschedulable using the [`kubectl cordon`](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#cordon) command: 
    ```
    kubectl cordon <old_node_1>
    kubectl cordon <old_node_2>
    ...
    ```
8. Emtpy the nodes using the [`kubectl drain`](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#drain) command:
    ```
    kubectl drain <old_node_1>
    kubectl drain <old_node_2>
    ...
    ```
    Your old nodes will be emptied and the pods are recreated in the new pool.
9. Delete your old pool by clicking on <Icon name="more" /> > **Delete** next to the pool's name once all your pods are up again.

<Navigation title="See Also">
  <PreviousButton to="/containers/kubernetes/how-to/upgrade-kubernetes-version/">How to upgrade your Kubernetes Kapsule cluster</PreviousButton>
  <NextButton to="/containers/kubernetes/how-to/delete-cluster/">How to delete a cluster</NextButton>
</Navigation>
