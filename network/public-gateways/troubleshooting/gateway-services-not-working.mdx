---
meta:
  title: I attached the Public Gateway to my Private Network, but the services provided by the gateway are not working (NAT, DNS etc)
  description: This page explains how troubleshoot connection problems after after attaching a Public Gateway to a Private Network wbut finding that the services provided by the gateway are not working (NAT, DNS etc)
content:
  h1: I attached the Public Gateway to my Private Network, but the services provided by the gateway are not working (NAT, DNS etc)
  paragraph: This page explains how troubleshoot connection problems after after attaching a Public Gateway to a Private Network wbut finding that the services provided by the gateway are not working (NAT, DNS etc)
tags: public-gateway private-network public gateway private network error nat dns 
dates:
  validation: 2023-06-14
  posted: 2021-05-26
categories:
  - network
---

TODO CHECK THIS DOC

<Macro id="iam-requirements" />

First, check whether the gateway is properly plugged into the Private Network. We currently have a known issue where the GatewayNetwork gets created successfully without the gateway actually getting plugged into the network. To check whether this is the issue you are experiencing, please do the following:

1. Identify the Private Network's network interface on your Instance (which is attached to a Public Gateway). We'll use `priv0` as an example.
2. Set it as `UP` to be able to use it: `ip link set priv0 up`
3. Identify the MAC address of the gateway in your Private Network using either the [Scaleway Console](https://console.scaleway.com/) or the [API](https://www.scaleway.com/en/developers/api/public-gateway/#path-gateway-networks) (`mac_address` field of the GatewayNetwork). We'll use `02:00:b1:ac:ca:fe` as an example.
4. Go [here](https://ben.akrin.com/?p=1347), and paste the MAC address to get the IPv6 Link-Local Address of your gateway. In our example, using priv0, it is `fe80::000:b1ff:feac:cafe`
5. From your Instance, ping the gateway on its IPv6 link-local address, taking care to specify the Private Network interface. In our example, using `priv0`, the command is `ping fe80::000:b1ff:feac:cafe%priv0`.

    If the address does not ping, then you are indeed experiencing this known issue. The best way to fix it is either to delete and recreate the GatewayNetwork (you can keep the same DHCP configuration by specifying a `dhcp_id` upon creation), or attach a dummy Private Network to the gateway.

If the address does ping, then you may be either experiencing another issue, where the interface gets misconfigured, or just have an error in your configuration. To test for this, update any property of your GatewayNetwork or the associated DHCP configuration in order to trigger a reconfiguration. If this does not fix it, please check your configuration.

If the problem persists, please do not hesitate to [contact us on the #vpc-public-gateway channel on the Scaleway Community Slack.](https://scaleway-community.slack.com/archives/C01NTFET64D) 
