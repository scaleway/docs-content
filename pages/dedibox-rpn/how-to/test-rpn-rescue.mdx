---
title: Test RPN in rescue mode
description: This page explains how to test different RPN from rescue mode before opening a support ticket.
tags: dedibox rpn rpnv2 networking troubleshooting
dates:
  validation: N/A
  posted: 2025-09-30
---
import image from 'assets/scaleway_dedibox_rpn_rescue_network.png'
import image2 from 'assets/scaleway_dedibox_rpn_rescue_page_list.png'

<Message type="tip">
  To put the servers into rescue mode, you can consult this [page](/dedibox/how-to/use-rescue-mode/).
</Message>

# RPNv1

<Message type="important">
  Please ensure that you have your RPN group with at least two servers in it for the test.
  <Lightbox image={image2} alt="" />
</Message>

You can access your RPN groups page [here](https://console.online.net/fr/server/rpn).

- On both servers

Install ***isc-dhcp-client*** with this command:

```sh
apt install isc-dhcp-client
```

Execute this command to automatically request a network configuration.

```sh
dhclient
```

Once this command has been executed, it will automatically find the IP address.

```sh
3: enp0s20f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc mq state UP group default qlen 1000
    link/ether 00:07:cb:0b:8d:d2 brd ff:ff:ff:ff:ff:ff
    inet 10.91.173.31/24 brd 10.91.173.255 scope global dynamic enp0s20f1
       valid_lft 388239557sec preferred_lft 388239557sec
    inet6 fe80::207:cbff:fe0b:8dd2/64 scope link
       valid_lft forever preferred_lft forever
```

Here is the result demonstrating that RPNv1 works.

- Server A :

```sh
3: enp0s20f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc mq state UP group default qlen 1000
    link/ether 00:07:cb:0b:8d:d2 brd ff:ff:ff:ff:ff:ff
    inet 10.91.173.31/24 brd 10.91.173.255 scope global dynamic enp0s20f1
       valid_lft 388239325sec preferred_lft 388239325sec
    inet6 fe80::207:cbff:fe0b:8dd2/64 scope link
       valid_lft forever preferred_lft forever
root@rescue-ddx:~# ping 10.91.173.41
PING 10.91.173.41 (10.91.173.41) 56(84) bytes of data.
64 bytes from 10.91.173.41: icmp_seq=1 ttl=64 time=0.366 ms
64 bytes from 10.91.173.41: icmp_seq=2 ttl=64 time=0.081 ms
64 bytes from 10.91.173.41: icmp_seq=3 ttl=64 time=0.114 ms
64 bytes from 10.91.173.41: icmp_seq=4 ttl=64 time=0.077 ms
64 bytes from 10.91.173.41: icmp_seq=5 ttl=64 time=0.110 ms
64 bytes from 10.91.173.41: icmp_seq=6 ttl=64 time=0.296 ms
^C
--- 10.91.173.41 ping statistics ---
6 packets transmitted, 6 received, 0% packet loss, time 111ms
rtt min/avg/max/mdev = 0.077/0.174/0.366/0.113 ms
root@rescue-ddx:~#
```

- Server B :

```sh
3: enp0s20f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc mq state UP group default qlen 1000
    link/ether 00:07:cb:0b:8d:5a brd ff:ff:ff:ff:ff:ff
    inet 10.91.173.41/24 brd 10.91.173.255 scope global dynamic enp0s20f1
       valid_lft 388239321sec preferred_lft 388239321sec
    inet6 fe80::207:cbff:fe0b:8d5a/64 scope link
       valid_lft forever preferred_lft forever
root@rescue-ddx:~# ping 10.91.173.31
PING 10.91.173.31 (10.91.173.31) 56(84) bytes of data.
64 bytes from 10.91.173.31: icmp_seq=1 ttl=64 time=0.143 ms
64 bytes from 10.91.173.31: icmp_seq=2 ttl=64 time=0.077 ms
64 bytes from 10.91.173.31: icmp_seq=3 ttl=64 time=0.076 ms
64 bytes from 10.91.173.31: icmp_seq=4 ttl=64 time=0.113 ms
64 bytes from 10.91.173.31: icmp_seq=5 ttl=64 time=0.098 ms
64 bytes from 10.91.173.31: icmp_seq=6 ttl=64 time=0.091 ms
^C
--- 10.91.173.31 ping statistics ---
6 packets transmitted, 6 received, 0% packet loss, time 112ms
rtt min/avg/max/mdev = 0.076/0.099/0.143/0.025 ms
root@rescue-ddx:~#
```

# RPNv2

1. On each server page, you will find a network section.
<Lightbox image={image} alt="" />

2. You will need to retrieve the MAC address where there is a private IP address.

3. Log in to rescue mode and enter this command:

```sh
ip a
```

You should obtain this result:

```sh
root@rescue-ddx:~# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: enp0s20f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:07:cb:0b:8d:d1 brd ff:ff:ff:ff:ff:ff
    inet 51.15.9.61/24 brd 51.15.9.255 scope global enp0s20f0
       valid_lft forever preferred_lft forever
    inet6 fe80::207:cbff:fe0b:8dd1/64 scope link
       valid_lft forever preferred_lft forever
3: enp0s20f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 00:07:cb:0b:8d:d2 brd ff:ff:ff:ff:ff:ff
root@rescue-ddx:~#
```

For our example, the **enp0s20f1** interface is required for the RPN and matches with the MAC address retrieved on the console.

4. Enable the network interface with this command:

```sh
ip link set enp0s20f1 up
```

You can see that the interface is UP.

```sh
3: enp0s20f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:07:cb:0b:8d:d2 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::207:cbff:fe0b:8dd2/64 scope link
       valid_lft forever preferred_lft forever
root@rescue-ddx:~#
```

You can now retrieve the VLAN ID for each server in your RPNv2 Group or create it [here](https://console.online.net/fr/server/rpn/v2).

- In our example, we have two servers with VLAN ID 2000.

- On each server, you will need to execute these commands to configure RPNv2.

```sh
ip link add link enp0s20f1 name enp0s20f1.2000 type vlan id 2000
```

- On server A :

```sh
ip addr add 10.0.0.1/24 dev enp0s20f1.2000
```

- On server B:

```sh
ip addr add 10.0.0.2/24 dev enp0s20f1.2000
```

<Message type="note">
  If you have successfully pinged both IPs from both servers, this indicates that RPNv2 is functioning.
</Message>

# Test the RPN bandwidth with Iperf3

<Message type="tip">
  Iperf3 is already installed in rescue mode.
</Message>

- On server A

You need to launch iperf3 in server mode with this command:

```sh
iperf3 -s
```

- On server B

You need to launch iperf3 in client mode with this command:

```sh
iperf3 -c PRIVATE_IP
```

You will then obtain a result:

```sh
root@rescue-ddx:~# iperf3 -c 10.91.173.31
Connecting to host 10.91.173.31, port 5201
[  5] local 10.91.173.41 port 36966 connected to 10.91.173.31 port 5201
[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
[  5]   0.00-1.00   sec   133 MBytes  1.11 Gbits/sec  141   8.74 KBytes
[  5]   1.00-2.00   sec  28.1 MBytes   236 Mbits/sec  221   8.74 KBytes
[  5]   2.00-3.00   sec  34.1 MBytes   286 Mbits/sec  259   8.74 KBytes
[  5]   3.00-4.00   sec  28.0 MBytes   234 Mbits/sec  234   8.74 KBytes
[  5]   4.00-5.00   sec  27.5 MBytes   230 Mbits/sec  196   17.5 KBytes
[  5]   5.00-6.00   sec  32.9 MBytes   276 Mbits/sec  258    402 KBytes
[  5]   6.00-7.00   sec  29.2 MBytes   245 Mbits/sec  227   17.5 KBytes
[  5]   7.00-8.00   sec  27.7 MBytes   232 Mbits/sec  212   26.2 KBytes
[  5]   8.00-9.00   sec  27.2 MBytes   228 Mbits/sec  225   17.5 KBytes
[  5]   9.00-10.00  sec  34.6 MBytes   291 Mbits/sec  273   17.5 KBytes
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   402 MBytes   337 Mbits/sec  2246             sender
[  5]   0.00-10.04  sec   400 MBytes   334 Mbits/sec                  receiver

iperf Done.
root@rescue-ddx:~#
```