---
meta:
  title: How to query embedding models
  description: Learn how to interact with embedding models using Scaleway's Generative APIs service.
content:
  h1: How to query embedding models
  paragraph: Learn how to interact with embedding models using Scaleway's Generative APIs service.
tags: generative-apis ai-data embedding-models
dates:
  validation: 2024-08-28
  posted: 2024-08-28
---


Scaleway's Generative APIs service allows users to interact with embedding models hosted on the platform through the Embeddings API.
The embedding API provides a simple interface for generating vector representations (embeddings) based on your input data. 
The embedding service is OpenAI compatible. Refer to OpenAI's [embedding documentation])(https://platform.openai.com/docs/api-reference/embeddings) for more detailed information. 

<Macro id=" requirements"/>

- A Scaleway account logged into the [console](https://console.scaleway.com)
- [Owner](/identity-and-access-management/iam/concepts/#owner) status or [IAM permissions](/identity-and-access-management/iam/concepts/#permission) allowing you to perform actions in the intended Organization
- A valid [API key](/identity-and-access-management/iam/how-to/create-api-keys/) (Necessary for API authentication)
- Python 3.7+ installed on your system.

## Querying embedding models via API

The embedding model inputs text and outputs a vector (list) of floating point numbers to use for tasks like similarity comparisons and search.
Let's query the model programmatically using the OpenAI SDK.

### Installing the OpenAI SDK

First, ensure you have the OpenAI SDK installed in your development environment. You can install it using pip:

```bash
pip install openai
```

### Initializing the client

Initialize the OpenAI client with your base URL and API key:

```python
from openai import OpenAI

# Initialize the client with your base URL and API key
client = OpenAI(
    base_url="https://bccf05e2-55e1-4e42-aeec-87e153b7e552.ifr.fr-par.scw.cloud/v1",  # Scaleway's Generative AI endpoint
    api_key="<SCW_API_KEY>"  # Your unique API key from Scaleway
)
```

### Generating embeddings with sentence-T5-XXL

You can now generate embeddings using the `sentence-T5-XXL` model. Follwoing is an example:

```python
# Generate embeddings using the 'sentence-T5-XXL' model
embedding_response = client.embeddings.create(
    input= "Artificial Intelligence is transforming the world.",
    model= "sentence-T5-XXL"
)

# Output the embedding vector
print(embedding_response.data[0].embedding)
```

This code sends input text to the `sentence-T5-XXL` embedding model and returns a vector representation of the text. The `sentence-T5-XXL` model is specifically designed for generating high-quality sentence embeddings.

### Model parameters and their effects

The following parameters can be adjusted to influence the output of the embedding model:

- **`input`**: The text or data you want to convert into an embedding.
- **`model`**: The specific embedding model to use, in this case, `sentence-T5-XXL`.
- **`user`**: A unique identifier representing your end user, which can be used for tracking and personalization.

<Message type="tip">
 You can experiment with these parameters in the Playground to see how they affect the model's embeddings.
</Message>

## Advanced usage tips

### Using the Playground for fine-tuning

The Playground allows you to test and tweak your inputs and fine-tune parameters interactively. This can help you identify the best settings for your application without writing any code.

For example, you can:

- Modify the input text to see how it affects the resulting embedding vector.
- Switch between different embedding models to compare results and find the best fit for your use case.

### Batch processing

For bulk processing of embeddings, you can use the API to send multiple inputs in a single request by using loops in your code. This can be particularly useful for generating embeddings for large datasets or processing numerous inputs simultaneously.

Example:

```python
inputs = [
    "The future of AI is bright.",
    "Deep learning is a subset of machine learning.",
    "Data science involves statistics and programming."
]

embedding_responses = [client.embeddings.create(
    input=input_text,
    model="sentence-T5-XXL"
) for input_text in inputs]

for i, response in enumerate(embedding_responses):
    print(f"Embedding {i + 1}: {response.data[0].embedding}")
```

<Message type="warning">
 If you encounter an error such as "Invalid API Key" or "Input data exceeds model limits", refer to the [Scaleway API documentation](/) for troubleshooting tips.
</Message>
